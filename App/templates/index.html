{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Welcome - Chat App</title>
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
</head>
<body>
    <header>
        <h1>üí¨ Welcome to AmiVibe</h1>
        <p>Connect instantly with friends and colleagues</p>
    </header>

    <!-- ====== Django messages ====== -->
    
    <div class="container">
        <div class="card">
            <div class="messages">
                        {% if messages %}
                            {% for m in messages %}
                                {# use m.tags to set class (e.g. 'error', 'success', 'info') #}
                                <div class="msg {% if 'error' in m.tags %}error{% elif 'success' in m.tags %}success{% else %}info{% endif %}">
                                    {{ m }}
                                </div>
                            {% endfor %}
                        {% endif %}
            </div>
            <!-- Register Form (default visible) -->
            <div id="register-form">
                <h2>Register</h2>
                <form method="POST">
                    {% csrf_token %}
                    <p>
                        <input type="text" name="username" placeholder="Username" required>
                    </p>
                    <p>
                        <input type="email" name="email" placeholder="Email" required>
                    </p>
                    <p>
                        <input type="password" name="password" placeholder="Password" required>
                    </p>
                    <p>
                        <input type="password" name="confirm_password" placeholder="Confirm Password" required>
                    </p>
                    <button type="submit" name="register_submit">Register</button>
                </form>
                <span class="toggle-link" onclick="toggleForms('login')">
                    Already registered? Login here
                </span>
            </div>

            <!-- Login Form (hidden initially) -->
            <div id="login-form" style="display: none;">
                <h2>Login</h2>
                <form method="POST">
                    {% csrf_token %}
                    <p>
                        <input type="text" name="username" placeholder="Username" required>
                    </p>
                    <p>
                        <input type="password" name="password" placeholder="Password" required>
                    </p>
                    <button type="submit" name="login_submit">Login</button>
                </form>
                <span class="toggle-link" onclick="toggleForms('register')">
                    New user? Register here
                </span>
            </div>
        </div>
    </div>

    <footer>
        &copy; {{ now|date:"Y" }} Chat App. Built with ‚ù§Ô∏è using Django & Channels.
    </footer>

    <script>
        function toggleForms(show) {
            document.getElementById("register-form").style.display = (show === "register") ? "block" : "none";
            document.getElementById("login-form").style.display = (show === "login") ? "block" : "none";
        }
    </script>
</body>
</html>
